@page "/events"
@inject NavigationManager Nav
@inject ContaJunsta.Services.DataService Data

<main class="page-root">

    <header class="page-header">
        <h1 class="page-title">EVENTOS</h1>
    </header>

    <!-- Área central que ocupa a página e permite rolagem -->
    <section class="list-area">
        <div class="events-list">
            @if (events.Count == 0)
            {
                <div class="empty">
                    Nenhum evento ainda.
                </div>
            }
            else
            {
                @foreach (var e in events)
                {
                    <button class="home-btn event-btn" @onclick="@(() => OpenEvent(e.Id))">
                        @e.Name
                    </button>
                }
            }
        </div>
    </section>

    <footer class="page-footer">
        <button class="home-btn ghost" @onclick="@GoBack">Voltar</button>
    </footer>

</main>

@code {
    private List<(string Id, string Name)> events = new();

    protected override async Task OnInitializedAsync()
    {
        var list = await Data.GetAllEventsAsync(onlyOpen: true);
        events = list.Select(e => (e.Id, e.Name)).ToList();
    }

    private void OpenEvent(string id) => Nav.NavigateTo($"/events/{id}");
    private void GoBack() => Nav.NavigateTo("/");
}


